%% Polos do Sistema em Malha Aberta
A = [0., 0., 0., 0.5, 0., 0.;
 0., 0., 0., 0., 0.5, 0.;
 0., 0., 0., 0., 0., 0.5;
 78.1896, 0., 0., -0.00129272, 0., 0.;
 0., 78.1896, 0., 0., -0.00129272, 0.;
 -264.624, -264.624, 0., 0., 0., -0.00437508];
B = [0.	0.	0.;
0.	0.	0.;
0.	0.	0.;
75.9085	0.	0.;
0.	75.9085	0.;
0.	0.	256.904];
C = [1	0	0	0	0	0
    0	1	0	0	0	0;
    0	0	1	0	0	0;
    0	0	0	1	0	0;
    0	0	0	0	1	0;
    0	0	0	0	0	1];
D = zeros(6,3);
sys = ss(A,B,C,D);

% h = pzplot(sys);
% hold on
P = pole(sys);

%% Alocação de Polos
p = [-4,-3,-2.6,-5,-6,-7];
% K = place(A,B,p);
% sys_lin = ss(A-B*K,B,C,D);
% t = linspace(0,8,1000);
% x0 = [0.2;0.1;0.14;1.2;1.2;1.2];
% y = lsim(sys_lin,zeros(3,1000),t,x0);
% h1 = pzplot(sys_lin);
Q = [5,0,0,0,0,0;
    0,5,0,0,0,0;
    0,0,5,0,0,0;
    0,0,0,0.1,0,0;
    0,0,0,0,0.1,0;
    0,0,0,0,0,0.1];
R = eye(3,3);
K = lqr(sys,Q,R);
sys_lin = ss(A-B*K,B,C,D);
pole(sys_lin)
